<div class="container">

    <mat-card class="card-edit-candidate">

        <mat-card-header>
            <mat-card-title>
                <h2 class="mat-h2">Editar Candidatos</h2>
            </mat-card-title>
        </mat-card-header>

        <mat-card-content>

            <form class="default-form">

                <div style="width: 50%;">

                    <mat-form-field class="default-form-field">
                        <input matInput placeholder="Nome" [(ngModel)]="candidato.nome" name="candidato.nome" />
                    </mat-form-field>

                    <mat-form-field class="default-form-field">
                        <input matInput placeholder="Sobrenome" [(ngModel)]="candidato.sobrenome" name="candidato.sobrenome" />
                    </mat-form-field>

                    <mat-form-field class="default-form-field">
                        <input matInput placeholder="Titulo" [(ngModel)]="candidato.titulo" name="candidato.titulo" />
                    </mat-form-field>

                    <mat-form-field class="default-form-field">
                        <input matInput placeholder="E-mail" [(ngModel)]="candidato.email" name="candidato.email" />
                    </mat-form-field>
                </div>

                <mat-tab-group style="margin-top: 20px;">

                    <mat-tab label="Experiencia">

                        <div>

                            <div style="float: right; margin-top: 20px;">
                                <button mat-raised-button (click)="adicionarExperiencia();" color="primary">
                                    <mat-icon class="icon-display">add</mat-icon>
                                </button>
                            </div>

                            <table mat-table [dataSource]="dataSource" *ngIf="candidato.experiencias.length > 0">

                                <ng-container matColumnDef="qualificacao">
                                    <th mat-header-cell *matHeaderCellDef>Qualificacao</th>
                                    <td mat-cell *matCellDef="let experiencia; let i = index;" class="table-experiencias-colunas">
                                        <mat-select [(ngModel)]="experiencia.qualificacao.id" name="experiencia.qualificacao_{{i}}">
                                            <mat-option *ngFor="let q of qualificacoes" [value]="q.id">
                                                {{q.fullName()}}
                                            </mat-option>
                                        </mat-select>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="tempo">
                                    <th mat-header-cell *matHeaderCellDef> Tempo </th>
                                    <td mat-cell *matCellDef="let experiencia; let i = index;" class="table-experiencias-coluna-tempo">
                                        <mat-form-field>
                                            <input matInput [(ngModel)]="experiencia.tempo" name="equivalencia.tempo_{{i}}" autocomplete="off" />
                                        </mat-form-field>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="delete">
                                    <th mat-header-cell *matHeaderCellDef></th>
                                    <td mat-cell *matCellDef="let experiencia; let i = index;" class="table-coluna-delete">
                                        <button mat-icon-button (click)="removerExperiencia(i)">
                                            <mat-icon>delete_outline</mat-icon>
                                        </button>
                                    </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                            </table>

                        </div>

                    </mat-tab>

                    <mat-tab label="Eventos">
                        <app-evento-panel id="{{candidato.id}}" tipo="Candidato" *ngIf="candidato.id != undefined"></app-evento-panel>
                    </mat-tab>

                </mat-tab-group>

            </form>

            <mat-divider></mat-divider>

        </mat-card-content>

        <mat-card-actions>
            <button mat-stroked-button color="primary" [routerLink]="['/candidatos/']">Cancelar</button>
            <div fxFlex></div>
            <button mat-stroked-button color="primary" (click)="salvar()">Salvar</button>
        </mat-card-actions>

    </mat-card>

</div>